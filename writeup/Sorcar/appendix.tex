% !Tex root=main.tex

%---------- Variants of Sorcar ----------
\section{Variants of the Function \texttt{Relevant-Predicates}}
The following section presents the various variants of the function \texttt{Relevant-} \texttt{Predicates} in pseudo code.

%---------- Relevant-Predicates-Max ----------
\subsection{\texttt{Relevant-Predicates-Max}}
\label{app:relevant-predicates-max}

\begin{algorithm}[H]
        
    \Fn{\RelevantPredicatesMax{$N$, $H$, $X$, $R$}}
    {
    
        $R' \gets \emptyset$\;
    
        \ForEach{negative counterexample $c \in N$}
        {
            $R' \gets R'\cup \{ p \in X \setminus R \mid c \not\models p \}$\;
        }
    
        \ForEach{Horn counterexample $(\{ c_1, \ldots, c_n \}, c) \in H$}
        {
            $R' \gets R'\cup \bigcup_{i = 1}^n \{ p \in X \setminus R \mid c_i \not\models p \}$\;
        }
     
        \Return{$R'$}\;
    }
    
    \caption{Computing the maximal set of relevant predicates}
    \label{alg:relevant-predicates-max}
\end{algorithm}

%---------- Relevant-Predicates-First ----------
\subsection{\texttt{Relevant-Predicates-First}}
\label{app:relevant-predicates-first}

\begin{algorithm}[H]

    \Fn{\RelevantPredicatesFirst{$N$, $H$, $X$, $R$}}
    {
    
        Define a total order $<_\mathcal P$ over $\mathcal P$\;
        $R' \gets \emptyset$\;
    
        \ForEach{negative counterexample $c \in N$}
        {
            $R' \gets R'\cup \{ p \}$ where $p$ is the $<_\mathcal P$-smallest predicate with $p \in X \setminus R$ and $c \not\models p$\;
        }
    
        \ForEach{Horn counterexample $(\{ c_1, \ldots, c_n \}, c) \in H$}
        {
            $R' \gets R'\cup \{ p \}$ where $p$ is the $<_\mathcal P$-smallest predicate from the set $\bigcup_{i=1}^n \{ p \in X \setminus R \mid c_i \not\models p \}$\;
        }
     
        \Return{$R'$}\;
    }
    
    \caption{Computing relevant predicates based on a preference ordering}
    \label{alg:relevant-predicates-first}
\end{algorithm}

%---------- Relevant-Predicates-Min ----------
\subsection{\texttt{Relevant-Predicates-Min}}
\label{app:relevant-predicates-min}

\begin{algorithm}[H]

    \Fn{\RelevantPredicatesMin{$N$, $H$, $X$, $R$}}
    {

        For each $c \in N$, construct $A_c \coloneqq \{ p \in X \setminus R \mid c \not\models p \}$\;
        For each $(L, c) \in H$, construct $A_{(L, c)} \coloneqq \{ p \in X \setminus R \mid \exists c' \in L \colon c' \not\models p \}$\;    

        \BlankLine
        
        Compute a minimal hitting set $R'$ for the instance $Q \coloneqq \{ A_c \mid c \in N \} \cup \{ A_{(L, c)} \mid (L, c) \in H \}$ (e.g., using a SAT solver)\;
        
        \BlankLine

        \Return{$R'$}\;
    }
    
    \caption{Computing a minimal set of relevant predicates}
    \label{alg:relevant-predicates-min}
\end{algorithm}

%---------- Relevant-Predicates-Greedy -----------
\subsection{\texttt{Relevant-Predicates-Greedy}}
\label{app:relevant-predicates-greedy}

\begin{algorithm}[H]

    \Fn{\RelevantPredicatesGreedy{$N$, $H$, $X$, $R$}}
    {

        For each $c \in N$, construct $A_c \coloneqq \{ p \in X \setminus R \mid c \not\models p \}$\;
        For each $(L, c) \in H$, construct $A_{(L, c)} \coloneqq \{ p \in X \setminus R \mid \exists c' \in L \colon c' \not\models p \}$\;  

        \BlankLine
        
        $R'\gets \emptyset$\;
        $Q \gets \{ A_c \mid c \in N \} \cup \{ A_{(L, c)} \mid (L, c) \in H \}$\;

        \BlankLine

        \While{$Q \neq \emptyset$}
        {
            Pick $p \in X \setminus (R \cup R')$ such that $|\{ A \in Q \mid p \in A \}|$ is maximal\;
            $R'\gets R' \cup \{ p \}$\;
            $Q \gets Q \setminus \{ A \in Q \mid p \in A \}$\;
        }

        \BlankLine

        \Return{$R'$}\;
    }
    
    \caption{Greedily computing a ``small'' set of relevant predicates}
    \label{alg:relevant-predicates-greedy}
\end{algorithm}